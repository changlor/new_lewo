<?php
/**
*
* 公共函数
*
**/

/**
* [获取某天签约合同的金额]
**/
function getTotalMoney($date){
	$MContract = M("contract");
	$sum_rent = $MContract->where(array("start_time"=>$date))->sum("rent");//租金
	$sum_fee = $MContract->where(array("start_time"=>$date))->sum("fee");//服务费
	$sum_deposit = $MContract->where(array("start_time"=>$date))->sum("deposit");//押金
	return $sum_fee+$sum_deposit+$sum_rent;
}

/**
* [获取某天签约的个数]
**/
function getSignCount($date){
	return M("contract")->where(array("start_time"=>$date))->count();
}

/**
* [获取某天缴定个数]
**/
function getJDCount($date){
	return M("schedule")->where(array("create_date"=>$date,"schedule_type"=>4))->count();
}

/**
* [获取某天总缴定金额]
**/
function getJDMoney($date){
	return M("schedule")->where(array("create_date"=>$date,"schedule_type"=>4))->sum("money");
}	

/**
* [获取房间总数]
**/
function getRoomCount(){
	return M("room")->where(array("room_type"=>1,"is_show"=>1))->count();
}
/**
* [获取房间空置率和空置数]
**/
function getEmptyRoomCount(){
	return M("room")->where(array("status"=>0,"room_type"=>1,"is_show"=>1))->count();
}
/**
* [获取床位总数]
**/
function getBedCount(){
	return M("room")->where(array("room_type"=>2,"is_show"=>1))->count();
}
/**
* [获取床位空置率和空置数]
**/
function getEmptyBedCount(){
	return M("room")->where(array("status"=>0,"room_type"=>2,"is_show"=>1))->count();
}
?> 